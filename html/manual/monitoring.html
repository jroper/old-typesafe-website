


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Monitoring &mdash; Cloudy Akka</title>
    <link rel="stylesheet" href="../_static/akka.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Cloudy Akka" href="../index.html" />
    <link rel="next" title="Management" href="management.html" />
    <link rel="prev" title="Durable Mailboxes" href="durable-mailbox.html" /> 
  </head>
  <body>
      <div class="header">
        <a href="../index.html">
          <img class="logo" src="../_static/logo.png" alt="Logo"/>
        </a>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="durable-mailbox.html">Durable Mailboxes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="management.html">Management</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="monitoring">
<h1>Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The monitoring is highly influenced by Google&#8217;s paper on <a class="reference external" href="http://research.google.com/pubs/pub36356.html">Dapper</a> where they outline how they
have built their very scalable distributed systems tracing service.</p>
<p><img alt="More info" class="align-middle" src="../_images/more.png" /> Read <a class="reference external" href="http://research.google.com/pubs/pub36356.html">this paper</a> for
some more detailed background.</p>
<p>In short it is attaching metadata to the messages as they flow through the
system, both across component boundaries as well as across the network. This
means that we can follow message chains in the distributed system and visualize
it in the Monitoring Dashboard through the concept of a <tt class="docutils literal"><span class="pre">span</span></tt> which
his latency for a message to move from A to B. We have many different types of
metadata and our tracked as the messages flow through the system. See the
configuration below for all the options for capturing statistics.</p>
<p>All this metadata is captured in a very efficient way using any combination of
thread local state and an immutable append-only tree data structure. There is
only one single contention point and that is when a full span is sent
(asynchronously) to the monitoring daemon. This is very different from most
statistics gathering products out there who are capturing statistics in either
atomic or volatile variables, this is something that is very expensive since
it&#8217;s introducing hundreds of highly contended synchronization points in your
whole system.</p>
<p>The goal of Cloudy Akka Monitoring is to be so efficient that you should always
have it on in production.</p>
</div>
<div class="section" id="monitoring-daemons">
<h2>Monitoring Daemons<a class="headerlink" href="#monitoring-daemons" title="Permalink to this headline">¶</a></h2>
<p>It currently supports three different daemons:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">LOCAL</span></tt> &#8211; captures all statistics locally</li>
<li><tt class="docutils literal"><span class="pre">REMOTE</span></tt> &#8211; sends all statistics to a single monitoring server using TCP</li>
<li><tt class="docutils literal"><span class="pre">FLUME</span></tt> &#8211; sends all statistics to Flume which you can orchestrate to
consolidate the metrics</li>
</ul>
</blockquote>
<p>Here is the configuration defining which daemons to run.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      daemons = ["LOCAL", "FLUME"] # Options: "LOCAL", "REMOTE", "FLUME"
    }
  }
}</pre>
</div>
<p>You boot up the local daemon(s) through the <tt class="docutils literal"><span class="pre">Monitoring</span></tt> object:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.cloud.monitoring._</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startLocalDaemons</span>

<span class="o">...</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">stopLocalDaemons</span>
</pre></div>
</div>
<p>This way of starting the daemons will take the configuration from the
configuration file. You can however override that by explicitly starting up each
daemon:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.cloud.monitoring._</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startWithLocalDaemon</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startWithRemoteDaemon</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startWithFlumeDaemon</span>

<span class="o">...</span>

<span class="nc">Monitoring</span><span class="o">.</span><span class="n">stopLocalDaemons</span>
</pre></div>
</div>
<p>The configuration also allows you to set a sampling frequency which means that
it should not track every span but only as often as a sampling frequency
says. This is defined in the configuration file along with all the other
options. Here is the full monitoring configuration with all its options and all
the metrics it currently is gathering. Each one of these can be turned on and
off.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      sampling-rate = 1000
      messages-per-second-sampling-rate = 1000
      max-latency-history = 1000
      max-tree-depth = 100
      allowAnnotations = on

      track-actor-type = on
      track-actor-uuid = on
      track-address = on
      track-message-type = on
      track-message-as-string = on
      track-message-send-scheme = on
      track-actor-create = on
      track-actor-start = on
      track-actor-stop = on
      track-actor-trap-exit = on
      track-actor-restart = on
      track-mailbox-size = on
      track-dispatcher = on

      track-remote-server-error = on
      track-remote-server-started = on
      track-remote-server-shutdown = on
      track-remote-server-nr-of-bytes-read = on
      track-remote-server-nr-of-bytes-written = on
      track-remote-server-client-connected = on
      track-remote-server-client-disconnected = on
      track-remote-server-client-closed = on

      track-remote-client-error = on
      track-remote-client-started = on
      track-remote-client-shutdown = on
      track-remote-client-nr-of-bytes-read = on
      track-remote-client-nr-of-bytes-written = on
      track-remote-client-connected = on
      track-remote-client-disconnected = on
    }
  }
}</pre>
</div>
<hr class="docutils" />
<p>You can add your own metadata annotation capturing application specific metrics.</p>
<p>First you need to enable it in the configuration.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      allowAnnotations = on
    }
  }
}</pre>
</div>
<p>When that is done you can use the <tt class="docutils literal"><span class="pre">Tracer</span></tt> object&#8217;s <tt class="docutils literal"><span class="pre">record</span></tt> methods to add
metadata to the spans.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">def</span> <span class="n">record</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">def</span> <span class="n">record</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">desc</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">def</span> <span class="n">record</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">desc</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">body</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Byte</span><span class="o">])</span>
</pre></div>
</div>
<p>Here is an example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.cloud.monitoring.Tracer</span>

<span class="nc">Tracer</span> <span class="n">record</span> <span class="o">(</span>
  <span class="s">&quot;access-violation&quot;</span><span class="o">,</span>
  <span class="s">&quot;Unauthorized access of service [%s]&quot;</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="n">serviceName</span><span class="o">),</span>
  <span class="n">user</span><span class="o">.</span><span class="n">getBytes</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="jmx">
<h2>JMX<a class="headerlink" href="#jmx" title="Permalink to this headline">¶</a></h2>
<p>All statistics data is made available through JMX. You can browse it using
JConsole that comes with the standard JDK distribution; just invoke <tt class="docutils literal"><span class="pre">jconsole</span></tt>
and connect to the JMX node, or with any other JMX console. If you are using the
<tt class="docutils literal"><span class="pre">LOCAL</span></tt> daemon then you have to connect to each node individually, if you are
using the <tt class="docutils literal"><span class="pre">REMOTE</span></tt> or <tt class="docutils literal"><span class="pre">FLUME</span></tt> daemons then all statistics will be consolidated
and you can connect to the node that runs the Management Server.</p>
<p>JMX support is turned on and off using the default <tt class="docutils literal"><span class="pre">akka.enable-jmx</span></tt>
configuration option.</p>
<div class="highlight-conf"><pre>akka {
  enable-jmx = on
}</pre>
</div>
<p>Here are the MBeans available:</p>
<div class="section" id="monitoringmbean">
<h3>MonitoringMBean<a class="headerlink" href="#monitoringmbean" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">MonitoringMBean</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">start</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">stop</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">enableDaemonLocal</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">disableDaemonLocal</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">enableDaemonRemote</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">disableDaemonRemote</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">enableDaemonFlume</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">disableDaemonFlume</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">getTotalNrOfCreatedActors</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRunningActors</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfActorTrapExits</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfActorRestarts</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfFutureTimeouts</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfProcessedMessages</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfBytesWritten</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfBytesRead</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteClientsStarted</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteClientsShutdown</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteClientErrors</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteClientsConnected</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteClientsDisconnected</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServersStarted</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServersShutdown</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServerErrors</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServerClientConnections</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServerClientDisconnections</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTotalNrOfRemoteServerClientConnectionsClosed</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getMessagesPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getBangsPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getBangBangsPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getBangBangBangsPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getFutureResultsPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getFutureErrorsPerSecond</span><span class="k">:</span> <span class="kt">Float</span>
  <span class="k">def</span> <span class="n">getStartTime</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getUptime</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getAvailableProcessors</span><span class="k">:</span> <span class="kt">Int</span>
  <span class="k">def</span> <span class="n">getDaemonThreadCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getThreadCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getPeakThreadCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getCommittedHeap</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getMaxHeap</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getUsedHeap</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getCommittedNonHeap</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getMaxNonHeap</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getUsedNonHeap</span><span class="k">:</span> <span class="kt">Long</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="actormbean">
<h3>ActorMBean<a class="headerlink" href="#actormbean" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">ActorMBean</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">getAddress</span><span class="k">:</span> <span class="kt">String</span>
  <span class="k">def</span> <span class="n">getName</span><span class="k">:</span> <span class="kt">String</span>
  <span class="k">def</span> <span class="n">getNrCreated</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getNrRunning</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getNrTrapExits</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getNrRestarts</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getNrFutureTimeouts</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getNrProcessedMessages</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getLatestMessageTimeInMailbox</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getLatestMailboxSize</span><span class="k">:</span> <span class="kt">Int</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="threadpoolmbean">
<h3>ThreadPoolMBean<a class="headerlink" href="#threadpoolmbean" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">ThreadPoolMBean</span> <span class="o">{</span>

  <span class="c1">// monitoring</span>
  <span class="k">def</span> <span class="n">getIsShutdown</span><span class="k">:</span> <span class="kt">Boolean</span>
  <span class="k">def</span> <span class="n">getIsTerminated</span><span class="k">:</span> <span class="kt">Boolean</span>
  <span class="k">def</span> <span class="n">getIsTerminating</span><span class="k">:</span> <span class="kt">Boolean</span>
  <span class="k">def</span> <span class="n">getActiveCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getCompletedTaskCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getCorePoolSize</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getKeepAliveTime</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getLargestPoolSize</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getMaximumPoolSize</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getPoolSize</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getQueueSize</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getTaskCount</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getRejectionHandler</span><span class="k">:</span> <span class="kt">String</span>

  <span class="c1">// management</span>
  <span class="k">def</span> <span class="n">changeMaximumPoolSize</span><span class="o">(</span><span class="n">size</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeCorePoolSize</span><span class="o">(</span><span class="n">size</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeKeepAliveTime</span><span class="o">(</span><span class="n">millis</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeRejectionHandlerToAbort</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeRejectionHandlerToCallerRuns</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeRejectionHandlerToDiscard</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">changeRejectionHandlerToDiscardOldest</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">clearQueue</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">purgeCancelledTasks</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">shutdown</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">shutdownNow</span><span class="o">()</span><span class="k">:</span> <span class="kt">Unit</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="clusternodembean">
<h3>ClusterNodeMBean<a class="headerlink" href="#clusternodembean" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">ClusterNodeMBean</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">start</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">stop</span><span class="k">:</span> <span class="kt">Unit</span>

  <span class="k">def</span> <span class="n">makeAvailable</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">makeUnavailable</span><span class="k">:</span> <span class="kt">Unit</span>

  <span class="k">def</span> <span class="n">isConnected</span><span class="k">:</span> <span class="kt">Boolean</span>
  <span class="k">def</span> <span class="n">isAvailable</span><span class="k">:</span> <span class="kt">Boolean</span>

  <span class="k">def</span> <span class="n">getRemoteServerHostname</span><span class="k">:</span> <span class="kt">String</span>
  <span class="k">def</span> <span class="n">getRemoteServerPort</span><span class="k">:</span> <span class="kt">Int</span>

  <span class="k">def</span> <span class="n">getNodeName</span><span class="k">:</span> <span class="kt">String</span>
  <span class="k">def</span> <span class="n">getClusterName</span><span class="k">:</span> <span class="kt">String</span>
  <span class="k">def</span> <span class="n">getZooKeeperServerAddresses</span><span class="k">:</span> <span class="kt">String</span>

  <span class="k">def</span> <span class="n">getMemberNodes</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getAvailableNodes</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getLeader</span><span class="k">:</span> <span class="kt">String</span>

  <span class="k">def</span> <span class="n">getUuidsForClusteredActors</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getUuidsForActorsInUse</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getNodesForActorInUseWithUuid</span><span class="o">(</span><span class="n">uuid</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getUuidsForActorsInUseOnNode</span><span class="o">(</span><span class="n">nodeName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">setConfigElement</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">getConfigElement</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">AnyRef</span>
  <span class="k">def</span> <span class="n">removeConfigElement</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
  <span class="k">def</span> <span class="n">getConfigElementKeys</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="spanmbean">
<h3>SpanMBean<a class="headerlink" href="#spanmbean" title="Permalink to this headline">¶</a></h3>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">trait</span> <span class="nc">SpanMBean</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">getMostRecentSpanFingerprints</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getMostFrequentSpanFingerprints</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getNumberOfHitsForMostFrequentSpan</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Long</span>
  <span class="k">def</span> <span class="n">getLatestLatencyForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getLatencyMeanForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getLatencyVarianceForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getMaxLatencyForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getMinLatencyForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getLatenciesForId</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Double</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">getFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getTenPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getFifteenPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getTwentyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getTwentyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getThirtyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getThirtyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getFourtyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getFourtyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getFiftyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getFiftyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getSixtyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getSixtyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getSeventyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getSeventyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getEightyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getEightyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getNinetyPercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
  <span class="k">def</span> <span class="n">getNinetyFivePercentileLatency</span><span class="o">(</span><span class="n">fingerprint</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="snmp">
<h2>SNMP<a class="headerlink" href="#snmp" title="Permalink to this headline">¶</a></h2>
<p>Coming soon.</p>
</div>
<div class="section" id="accessing-statistics-through-rest-api">
<h2>Accessing statistics through REST API<a class="headerlink" href="#accessing-statistics-through-rest-api" title="Permalink to this headline">¶</a></h2>
<p>Coming soon.</p>
</div>
<div class="section" id="monitoring-dashboard">
<h2>Monitoring Dashboard<a class="headerlink" href="#monitoring-dashboard" title="Permalink to this headline">¶</a></h2>
<p>The Monitoring Dashboard is a WAR file that you can drop into any servlet
container. It comes with a servlet initializer so it will boot up itself,
including JMX and REST support (if that is enabled in the configuration).</p>
<p>You can also run it from SBT, which could be an easy way to get things running
while you are developing or testing things out. Simply step into the
$AKKA_CLOUD_HOME dir and run Jetty.</p>
<div class="highlight-shell"><pre>% cd $AKKA_CLOUD_HOME
% sbt
&gt; jetty-run</pre>
</div>
<p>Now you can browse to <tt class="docutils literal"><span class="pre">http://localhost:8080</span></tt> to see the Monitoring Dashboard.</p>
<p>You configure the Monitoring Dashboard in the <tt class="docutils literal"><span class="pre">akka.conf</span></tt> file.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      enable-sequence-diagram-generation = on
      console-webapp-dir = "./akka-cloud-console/target/scala_2.8.1/webapp/"
      console-refresh-rate = 10
    }
  }
}</pre>
</div>
</div>
<div class="section" id="statistics-and-log-consolidation-with-remote-service">
<h2>Statistics and log consolidation with REMOTE service<a class="headerlink" href="#statistics-and-log-consolidation-with-remote-service" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">REMOTE</span></tt> service is managed by the <tt class="docutils literal"><span class="pre">MonitoringServer</span></tt>. If you are booting
up the Monitoring Dashboard (see section below) then the Monitoring Server is
started for you but if you want to run in &#8220;headless&#8221; mode and only access it
through JMX or REST then you can boot it up explicitly:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">import</span> <span class="nn">akka.cloud.monitoring._</span>

<span class="nc">MonitoringServer</span><span class="o">.</span><span class="n">start</span>

<span class="c1">// ...</span>

<span class="nc">MonitoringServer</span><span class="o">.</span><span class="n">stop</span>
</pre></div>
</div>
<p>As discussed above to enable REMOTE based monitoring service you also need to start
the <tt class="docutils literal"><span class="pre">REMOTE</span></tt> daemon locally on each node is your cluster. This is done through
the <tt class="docutils literal"><span class="pre">Monitoring</span></tt> object.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// takes the config from the akka.conf file - remember to enable &#39;REMOTE&#39; daemon</span>
<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startLocalDaemons</span>

<span class="c1">// overrides the akka.conf file and starts up the &#39;REMOTE&#39; daemon regardless</span>
<span class="nc">Monitoring</span><span class="o">.</span><span class="n">startWithRemoteDaemon</span>
</pre></div>
</div>
<p>You configure the <tt class="docutils literal"><span class="pre">REMOTE</span></tt> service in the <tt class="docutils literal"><span class="pre">akka.conf</span></tt> file.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      remote-daemon-hostname = "localhost"
      remote-daemon-port = 8700
    }
  }
}</pre>
</div>
<p>That&#8217;s it.</p>
</div>
<div class="section" id="statistics-and-log-consolidation-with-flume">
<h2>Statistics and log consolidation with Flume<a class="headerlink" href="#statistics-and-log-consolidation-with-flume" title="Permalink to this headline">¶</a></h2>
<p>Cloudy Akka Monitoring supports using <a class="reference external" href="http://archive.cloudera.com/cdh/3/flume/UserGuide.html">Flume</a> for consolidating
statistics and logging information.</p>
<p>Flume is a distributed, reliable, and available service for efficiently
collecting, aggregating, and moving large amounts of log data. It has a simple
and flexible architecture based on streaming data flows. It is robust and fault
tolerant with tunable reliability mechanisms and many failover and recovery
mechanisms. The system is centrally managed and allows for intelligent dynamic
management. It uses a simple extensible data model that allows for online
analytic applications.</p>
<p>In order to use this service you first have to download and install Flume. See
the Flume documentation for details on how to do that.</p>
<div class="section" id="configuration-of-flume">
<h3>Configuration of Flume<a class="headerlink" href="#configuration-of-flume" title="Permalink to this headline">¶</a></h3>
<p>Now you have to add the the FQN of the <tt class="docutils literal"><span class="pre">AkkaMonitoringSinkBuilder</span></tt> class to
the <tt class="docutils literal"><span class="pre">flume.plugin.classes</span></tt> option in the <tt class="docutils literal"><span class="pre">&lt;flume-root&gt;./conf/flume-conf.xml</span></tt>
Flume configuration file.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
  <span class="nt">&lt;name&gt;</span>flume.plugin.classes<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;value&gt;</span>akka.cloud.monitoring.flume.AkkaMonitoringSinkBuilder<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;description&gt;</span>Akka plugins<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>
</div>
<p>Make sure you set the <tt class="docutils literal"><span class="pre">AKKA_HOME</span></tt>, <tt class="docutils literal"><span class="pre">AKKA_CLOUD_HOME</span></tt> and <tt class="docutils literal"><span class="pre">SCALA_HOME</span></tt>
environment variables and then set the <tt class="docutils literal"><span class="pre">FLUME_CLASSPATH</span></tt> environment variable
to this.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">export </span><span class="nv">FLUME_CLASSPATH</span><span class="o">=</span><span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-common/target/scala_2.8.1/classes:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/target/scala_2.8.1/classes:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/configgy-2.8.0-1.5.5.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/akka-actor-1.0-RC2-SNAPSHOT.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/akka-remote-1.0-RC2-SNAPSHOT.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/netty-3.2.3.Final.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/protobuf-java-2.3.0.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/uuid-3.2.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/plantuml-1.0.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/commons-math-2.1.jar:<span class="se">\</span>
  <span class="nv">$AKKA_CLOUD_HOME</span>/akka-cloud-monitoring/lib_managed/scala_2.8.1/compile/sjson-0.8-2.8.0.jar:<span class="se">\</span>
  <span class="nv">$AKKA_HOME</span>/akka-actor/target/scala_2.8.1/classes:<span class="se">\</span>
  <span class="nv">$SCALA_HOME</span>/lib/scala-library.jar
</pre></div>
</div>
<p>You configure the <tt class="docutils literal"><span class="pre">FLUME</span></tt> service in the <tt class="docutils literal"><span class="pre">akka.conf</span></tt> file. We need to add
the hostname and port to the <tt class="docutils literal"><span class="pre">MonitoringServer</span></tt> that Flume should send the
final aggregated data to. We will use the same hostname and port when we define
the Flume RPC source (<tt class="docutils literal"><span class="pre">Source:</span> <span class="pre">rpcSource(port)</span></tt>) later on when we configure
the pipeline.</p>
<div class="highlight-conf"><pre>akka {
  cloud {
    monitoring {
      flume-rpc-hostname = "localhost"
      flume-rpc-port = 3737
    }
  }
}</pre>
</div>
</div>
<div class="section" id="set-up-a-flume-workflow">
<h3>Set up a Flume workflow<a class="headerlink" href="#set-up-a-flume-workflow" title="Permalink to this headline">¶</a></h3>
<p>Now you are all set and ready for using Flume together with the Cloudy Akka
Monitoring module.</p>
<p>Now let&#8217;s try out a full chain:</p>
<p>Application -&gt; Flume RPC Sink -&gt; Flume RPC Source -&gt; Akka Monitoring Sink -&gt; Monitoring Service (over TCP) -&gt; Monitoring Dashboard</p>
<p>Open three shells, let&#8217;s call them Shell 1, 2 and 3.</p>
<p><strong>Shell 1</strong></p>
<p>Run Akka Console (including Akka Monitoring Service):</p>
<div class="highlight-shell"><pre>% cd $AKKA_CLOUD_HOME
% sbt
&gt; jetty-run</pre>
</div>
<p><strong>Shell 2</strong></p>
<p>Run Flume Server:</p>
<div class="highlight-shell"><pre>% cd &lt;flume-root-dir&gt;
% ./bin/flume server</pre>
</div>
<p><strong>Shell 3</strong></p>
<p>Run Flume Agent:</p>
<div class="highlight-shell"><pre>% cd &lt;flume-root-dir&gt;
% ./bin/flume node -n akka-node</pre>
</div>
<p>Now browse to <tt class="docutils literal"><span class="pre">http://localhost:35871/flumeconfig.jsp</span></tt> and configure node
<tt class="docutils literal"><span class="pre">akka-node</span></tt>.</p>
<p>Here you have to define two things:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">rpcSource</span></tt> &#8211; need to be same port as the
<tt class="docutils literal"><span class="pre">akka.cloud.monitoring.flume-rpc-port</span></tt> option in the <tt class="docutils literal"><span class="pre">akka.conf</span></tt> file.</li>
<li><tt class="docutils literal"><span class="pre">akkaMonitoringSink</span></tt> &#8211; needs to be host and port of the Monitoring Service
(either started implicitly by booting up the Monitoring Dashboard or
explicitly through the <tt class="docutils literal"><span class="pre">MonitoringServer</span></tt>)</li>
</ul>
</blockquote>
<div class="highlight-conf"><pre>Source: rpcSource(3737)
Sink: akkaMonitoringSink(monitoringServiceHostname, monitoringServicePort)</pre>
</div>
<p>That&#8217;s it.</p>
<p>Now you can run your application and see the statistics flow through Flume to
the Akka Monitoring Dashboard.</p>
</div>
<div class="section" id="extra-1">
<h3>Extra 1<a class="headerlink" href="#extra-1" title="Permalink to this headline">¶</a></h3>
<p>Now we can have some more fun and add a Flume Collector to the pipeline.</p>
<p>E.g this chain:
Application -&gt; Flume RPC Sink -&gt; Flume RPC Source -&gt; Flume Collector -&gt; Akka Monitoring Sink -&gt; Monitoring Service (over TCP) -&gt; Monitoring Dashboard</p>
<p><strong>Shell 4</strong></p>
<p>Run Flume collector:</p>
<div class="highlight-shell"><pre>% cd &lt;flume-root-dir&gt;
% ./bin/flume node -n collector</pre>
</div>
<p>Browse to <tt class="docutils literal"><span class="pre">http://localhost:35871/flumeconfig.jsp</span></tt> and configure pipeline in two steps.</p>
<p>Step 1: Configure node <tt class="docutils literal"><span class="pre">akka-node</span></tt>:</p>
<div class="highlight-conf"><pre>Source: rpcSource(3737)
Sink: agentSink("localhost", 35853)</pre>
</div>
<p>Step 2: Configure node <tt class="docutils literal"><span class="pre">collector</span></tt>:</p>
<div class="highlight-conf"><pre>Source: collectorSource(35853)
Sink: akkaMonitoringSink("localhost", 8700)</pre>
</div>
</div>
<div class="section" id="extra-2">
<h3>Extra 2<a class="headerlink" href="#extra-2" title="Permalink to this headline">¶</a></h3>
<p>For fun you can also add syslog to the mix.</p>
<p>Browse to <tt class="docutils literal"><span class="pre">http://localhost:35871/flumeconfig.jsp</span></tt> and reconfigure the nodes:</p>
<p>Reconfigure <tt class="docutils literal"><span class="pre">akka-node</span></tt>:</p>
<div class="highlight-conf"><pre>Source: syslogTcp(5140)
Sink: agentSink("localhost", 35853)</pre>
</div>
<p>Reconfigure node: <tt class="docutils literal"><span class="pre">collector</span></tt>:</p>
<div class="highlight-conf"><pre>Source: collectorSource(35853)
Sink: collectorSink("file:///tmp/flume/collected", "syslog")</pre>
</div>
</div>
</div>
<div class="section" id="flume-event-handler">
<h2>Flume Event Handler<a class="headerlink" href="#flume-event-handler" title="Permalink to this headline">¶</a></h2>
<p>You can also use the <tt class="docutils literal"><span class="pre">FlumeEventHandler</span></tt> to log events to Flume using Akka&#8217;s
regular event handler.</p>
<p>First you need to add it to the Akka event handlers and define the logging level:</p>
<div class="highlight-scala"><pre>akka {
  event-handlers = ["akka.cloud.monitoring.flume.FlumeEventHandler"]
  event-handler-level = "DEBUG" # Options: ERROR, WARNING, INFO, DEBUG
}</pre>
</div>
<p>Then you also need to configure it by giving it the hostname and port of the Flume RPC service:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">akka</span> <span class="o">{</span>
  <span class="n">cloud</span> <span class="o">{</span>
    <span class="n">monitoring</span> <span class="o">{</span>
      <span class="n">flume</span><span class="o">-</span><span class="n">rpc</span><span class="o">-</span><span class="n">hostname</span> <span class="k">=</span> <span class="s">&quot;localhost&quot;</span>
      <span class="n">flume</span><span class="o">-</span><span class="n">rpc</span><span class="o">-</span><span class="n">port</span> <span class="k">=</span> <span class="mi">3737</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now we are ready to use the event handler. For all details on how to use it see the
<a class="reference external" href="http://doc.akka.io/event-hander">Akka Event Handler documentation</a>, but here is
an example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="c1">// You can use the general &#39;notify&#39; method</span>
<span class="nc">EventHandler</span><span class="o">.</span><span class="n">notify</span><span class="o">(</span><span class="nc">EventHandler</span><span class="o">.</span><span class="nc">Error</span><span class="o">(</span><span class="n">exception</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="n">toString</span><span class="o">))</span>

<span class="c1">// Or use one of the specific &#39;error&#39;, &#39;warning&#39;, &#39;info&#39; or &#39;debug&#39; methods</span>
<span class="nc">EventHandler</span><span class="o">.</span><span class="n">error</span><span class="o">(</span><span class="n">exception</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="n">toString</span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="durable-mailbox.html">Durable Mailboxes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="management.html">Management</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2009-2011, Scalable Solutions AB.
      Last updated on Apr 14, 2011.
    </div>
  </body>
</html>